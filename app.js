'use strict';
// const moment = require('moment');
module.exports = app => {
    // const ctx = app.createAnonymousContext();
    app.beforeStart(async () => {
        // app.regions = await ctx.model.Area.findAll({
        //     where: {},
        //     order: [['order', 'ASC']],
        //     raw: true,
        //     attributes: ['id', 'grade', 'name', 'parent_id']
        // });
        // if (app.config.env === 'local') {
            // await app.model.Spec.sync({ force: true }); // 单个表
            // await app.model.Sku.sync({ force: true }); // 单个表
            // await app.model.Spu.sync({ force: true }); // 单个表
            // await app.model.SkuStore.sync({ force: true }); // 单个表
            // await app.model.Coupon.sync({ force: true }); // 单个表
            // await app.model.CouponCode.sync({ force: true }); // 单个表
            // await app.model.CouponRule.sync({ force: true }); // 单个表
            // await app.model.CouponUseRange.sync({ force: true }); // 单个表
            // await app.model.Store.sync({ force: true }); // 单个表
            // await app.model.User.sync({ force: true }); // 单个表
            // await app.model.SkuCategoryTag.sync({ force: true }); // 单个表
            // await app.model.SkuCategory.sync({ force: true }); // 单个表
            // await app.model.RecommendPrice.sync({ force: true }); // 单个表
            // await app.model.Merchant.sync({ force: true }); // 单个表
            // await app.model.CartItem.sync({ force: true }); // 单个表
            // await app.model.Activtiy.sync({ force: true }); // 单个表
            // await app.model.SkuStockLog.sync({ force: true }); // 单个表
            // await app.model.Order.sync({ force: true }); // 单个表
            // await app.model.OrderItem.sync({ force: true }); // 单个表
            // await app.model.OrderItem.sync({ force: true }); // 单个表
            // await app.model.Order.sync({ force: true }); // 单个表
            // await app.model.CartItem.sync({ force: true }); // 单个表
            // await app.model.ChangePrice.sync({ force: true }); // 单个表
            // await app.model.AfterService.sync({ force: true }); // 单个表
            // await app.model.AfterServiceItem.sync({ force: true }); // 单个表
            // await app.model.ApplyLog.sync({ force: true }); // 单个表
            // await app.model.ApplyInfo.sync({ force: true }); // 单个表
            // await app.model.SkuActivity.sync({ force: true }); // 单个表
            // await app.model.Ad.sync({ force: true }); // 单个表
            // await app.model.AdPosition.sync({ force: true }); // 单个表
            // await app.model.Article.sync({ force: true }); // 单个表
            // await app.model.ArticleArticleTag.sync({ force: true }); // 单个表
            // await app.model.ArticleCategory.sync({ force: true }); // 单个表
            // await app.model.ArticleTag.sync({ force: true }); // 单个表
            // await app.model.ArticleUserLog.sync({ force: true }); // 单个表
            // await app.model.Order.sync({ force: true }); // 单个表
            // await app.model.OrderItem.sync({ force: true }); // 单个表
            // await app.model.Area.sync({ force: true }); // 单个表
            // await app.model.PayMethod.sync({ force: true }); // 单个表
            // await app.model.Statistic.sync({ force: true }); // 单个表
            // await app.model.PayLog.sync({ force: true }); // 单个表
            // await app.model.SkuActivity.sync({ force: true }); // 单个表
            // await app.model.SkuActivitySku.sync({ force: true }); // 单个表
            // await app.model.UserPromotion.sync({ force: true }); // 单个表
            // await app.model.UserRegister.sync({ force: true }); // 单个表
            // await app.model.OrderOperationLog.sync({ force: true }); // 单个表
            // await app.model.SkuPrice.sync({ force: true }); // 单个表
            // await app.model.SkuCheck.sync({ force: true }); // 单个表
        // }

//             }
// 
//         });
    });
    // app.verifyData = function (rule, data) {
    //     if (rule) {
    //         var errors = app.validator.validate(rule, data);
    //         if (errors) {
    //             let errorMsg = ''
    //             Object.keys(errors).map(e => {
    //                 errorMsg += errors[e]['field'] + ' ' + errors[e]['message'] + '; '
    //             })
    //             if (errorMsg) {
    //                 ctx.throw(HTTPCODE.BADREQUEST.code, errorMsg, {});
    //             }
    //         }
    //     }
    // }
};
